<div class="row">
  <div class="col s12">
    <div class="input-field">
      <input id="js-name-fuzzy" type="text" class="validate" placeholder="Enter the details of the designer" autofocus>
    </div>
  </div>
</div>

<div class="row">
  <table class="highlight">
    <thead>
      <tr>
        <th colspan="4" class="center">Full Name</th>
        <th colspan="2" class="center">Store Name</th>
        <th colspan="2" class="center">Mobile Number</th>
        <th colspan="1" class="center">Email</th>
        <th colspan="1" class="center">Number of products</th>
        <th colspan="1" class="center">Requests Recieved</th>
        <th colspan="1" class="center">Orders Recieved</th>
        <th colspan="1" class="center">Chat</th>
      </tr>
    </thead>
    <tbody>
      <% designers.each do |designer| %>
        <tr id="js-data-row">
          <td colspan="4" class="center"><%= link_to designer.full_name.titleize, support_designer_path(designer) %></td>

          <td colspan="2" class="center">
            <%= designer.designer_store_info&.display_name %>
          </td>

          <td colspan="2" class="center"><%= designer.mobile_number %></td>

          <td colspan="1" class="center">
            <%= designer.email %>
          </td>

          <td colspan="1" class="center">
            <%= designer.products.size %>
          </td>

          <td colspan="1" class="center">
            <%= designer.requests.size %>
          </td>

          <td colspan="1" class="center">
            <%= designer.orders.size %>
          </td>

          <td colspan="1" class="center">
            
            <%= link_to 'Chat',
              chat_path(Conversation.where(receiver_type:"support_on_general", conversationable_id:designer, conversationable_type: "Designer" ).first.id), 
              :onclick=>"window.open(this.href,'chat', 'height=500, width=500');return false;" rescue nil
            %>
          </td>


        </tr>
      <% end %>
    </tbody>
  </table>
</div>
